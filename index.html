<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Picture-Word Match</title>
<style>
/* ===== ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ & ã‚¹ã‚¿ã‚¤ãƒ« ===== */
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{margin:0;background:#f0f8ff}
#container{display:flex;flex-direction:column;align-items:center;padding:20px}
h1{margin-bottom:20px}
button{cursor:pointer;border:none;border-radius:8px;padding:10px 18px;
       font-size:1rem;background:#2196f3;color:#fff}
#modeBtns{display:flex;gap:20px}
#gameControls{display:flex;gap:12px;margin-bottom:16px;justify-content:center;
              width:100%;padding:10px;flex-wrap:wrap}
#timer{font-weight:bold;font-size:1.1rem;color:#d32f2f}
#gameArea{display:flex;width:100%;max-width:1200px}
.area{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;width:50%;padding:0 10px}
.img-card,.word-card{width:100%;height:100px;border-radius:12px;display:flex;
                     align-items:center;justify-content:center;user-select:none;
                     touch-action:none;transition:transform .25s}
/* æ–‡å­—ã‚’å¤§ãããƒ»æ¿ƒã */
.img-card{font-size:2.5rem;background:#fff3e0;border:3px solid #ffb74d}
.word-card{font-size:1.1rem;font-weight:600;background:#e3f2fd;border:3px solid #64b5f6;
           cursor:grab;padding:6px;text-align:center;line-height:1.15;color:#000}
.matched{opacity:.35;cursor:default}
@keyframes flash{from{background:#c8e6c9}to{background:#fff3e0}}
@keyframes shake{10%,90%{transform:translateX(-4px)}
                 20%,80%{transform:translateX(4px)}
                 30%,50%,70%{transform:translateX(-4px)}
                 40%,60%{transform:translateX(4px)}}
.correct-anim{animation:flash .3s}
.wrong-anim{animation:shake .35s}
/* ã‚¹ãƒãƒ›ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
@media(max-width:480px){
  #gameArea{flex-wrap:wrap}
  .area{width:100%;grid-template-columns:repeat(2,1fr);gap:8px}
  .img-card,.word-card{height:80px}
  /* æ–‡å­—ã‚’å¤§ãããƒ»æ¿ƒãï¼ˆãƒ¢ãƒã‚¤ãƒ«ï¼‰ */
  .img-card{font-size:2rem}
  .word-card{font-size:.9rem;font-weight:600;padding:4px}
}
/* ===== ã‚³ãƒ³ãƒ•ã‚§ãƒƒãƒ†ã‚£ Canvas ===== */
#confettiCanvas{
  position:fixed;inset:0;pointer-events:none;z-index:999;display:none;
}
/* ã™ã¹ã¦ã®ç”»åƒçµµæ–‡å­—å…±é€š */
.emoji {
  width: 1.2em;          /* æ–‡å­—ã‚µã‚¤ã‚ºã‚’åŸºæº–ã«æƒãˆã‚‹ */
  height: 1.2em;
  vertical-align: -0.2em;/* ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã¨é«˜ã•ã‚’å¾®èª¿æ•´ */
}

</style>
</head>
<body>
<canvas id="confettiCanvas"></canvas>

<div id="container">
  <!-- ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ -->
  <div id="startScreen">
    <h1>Picture-Word Match</h1>
    <div id="modeBtns">
      <button id="practiceBtn">Practice Mode</button>
      <button id="trialBtn">30-Set Trial Mode</button>
    </div>
  </div>

  <!-- ã‚²ãƒ¼ãƒ ç”»é¢ -->
  <div id="gameScreen" style="display:none;width:100%;flex-direction:column;align-items:center;">
    <div id="gameControls">
      <select id="categorySelect"></select>
      <button id="startCategoryBtn">Start</button>
      <button id="backBtn">Back</button>
      <span id="timer" style="display:none;margin-left:20px;"></span>
    </div>
    <div id="gameArea">
      <div id="imageArea" class="area"></div>
      <div id="wordArea"  class="area"></div>
    </div>
  </div>
</div>

<script>
/* ---------- iOS éŸ³å£°ãƒ­ãƒƒã‚¯è§£é™¤ ---------- */
const voicesReady=new Promise(res=>{
  if(speechSynthesis.getVoices().length) return res();
  speechSynthesis.onvoiceschanged=res;
});
function unlockIOS(){
  if(window._iosUnlocked)return;
  window._iosUnlocked=true;
  try{
    const ctx=new (window.AudioContext||window.webkitAudioContext)();
    const osc=ctx.createOscillator();osc.connect(ctx.destination);osc.start();osc.stop();
  }catch{}
  voicesReady.then(()=>{
    const u=new SpeechSynthesisUtterance('ready');u.lang='en-US';u.volume=0;
    speechSynthesis.speak(u);
  });
}
['touchstart','mousedown','keydown'].forEach(ev=>{
  document.addEventListener(ev,unlockIOS,{once:true});
});


/* ---------- éŸ³å£°å†ç”Ÿ ---------- */
function speak(t){
  voicesReady.then(()=>{
    speechSynthesis.cancel();speechSynthesis.resume();
    const u=new SpeechSynthesisUtterance(t);u.lang='en-US';
    u.voice=speechSynthesis.getVoices().find(v=>v.lang.startsWith('en'))||null;
    speechSynthesis.speak(u);
  });
}

/* ---------- å† è©ä»˜ä¸ ---------- */
function addArticle(w){
  if(/\s/.test(w)||w.endsWith('.'))return w;
  const noA=["bread","food","fun","snowing","raining","hot","cold","rice","milk","red","blue","green","yellow","black","white","orange","purple","brown",
             "sunny","rainy","windy","cloudy","snowy","one","two","three","four","five","six","seven",
             "eight","nine","ten","eleven","twelve"];
  if(noA.includes(w.toLowerCase())||w.toLowerCase().endsWith('s'))return w;
  return /^[aeiou]/i.test(w)?`an ${w}`:`a ${w}`;
}

/* ---------- ã‚³ãƒ³ãƒ•ã‚§ãƒƒãƒ†ã‚£ ---------- */
function celebrate(){
  const canvas=document.getElementById('confettiCanvas');
  const ctx=canvas.getContext('2d');
  canvas.width=window.innerWidth;canvas.height=window.innerHeight;
  canvas.style.display='block';

  const pieces=[...Array(200)].map(()=>({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height- canvas.height,
    size:5+Math.random()*8,
    fall:2+Math.random()*3,
    swing:Math.random()*2,
    hue:Math.random()*360
  }));

  let frame;
  function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    pieces.forEach(p=>{
      p.y+=p.fall;
      p.x+=Math.sin(p.y*0.02)*p.swing;
      if(p.y>canvas.height) p.y=-10;
      ctx.fillStyle=`hsl(${p.hue},90%,60%)`;
      ctx.beginPath();
      ctx.rect(p.x,p.y,p.size,p.size);
      ctx.fill();
    });
    frame=requestAnimationFrame(draw);
  }
  draw();
  setTimeout(()=>{
    cancelAnimationFrame(frame);
    canvas.style.display='none';
  },4000);
}

/* ---------- ãƒ‡ãƒ¼ã‚¿ ---------- */
/* â”€â”€ 1. ã‚«ãƒ†ã‚´ãƒªåˆ¥å˜èªãƒªã‚¹ãƒˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const wordsByCat = {
  "äººç‰©ãƒ»å½¹å‰² / People & Roles": [
    "baby","friend","boy","classmates","bride",
    "mother","father","sister","brother","grandpa"
  ],
  "è¡£é¡ãƒ»ã‚¢ã‚¯ã‚»ã‚µãƒªãƒ¼ / Clothes & Accessories": [
    "helmet","boots","hat","hats","slippers","uniform",
    "coat","coats","cap","shirt","shirts","pants/jeans","swimming trunks",
    "tie","bag","bags","shoes"
  ],
  "èº«ä½“ã®éƒ¨ä½ / Body Parts": ["hand","hands"],
  "é£Ÿã¹ç‰©ãƒ»é£²ã¿ç‰© / Food & Drinks": [
    "food","milk","bread","rice","egg","eggs","apple","apples","cola",
    "French fries","hamburger","vegetables","tomato"
  ],
  "æ—¥ç”¨å“ãƒ»é“å…· / Daily Goods & Tools": [
    "glass","soccer ball","roller coaster","car","flowers","can","fan","rope",
    "box","stick","snowman","umbrella","pen","pens","pencil","pencils",
    "letter","bicycle","door","3 textbooks","book","books",
    "cup","knife","mirror","basket ball","chocolate bar","chair","chairs","ladder"
  ],
  "å‹•ç‰© / Animals": [
    "frog","dog","dogs","cat","cats","bird","birds","elephant","elephants"
  ],
  "è‡ªç„¶ / Nature": ["moon","snow","sun","mountains","tree"],
  "æ¦‚å¿µãƒ»æ´»å‹• / Concepts & Activities": [
    "fun","trouble","hurry","sport","day","soccer","baseball"
  ],
  "å ´æ‰€ã‚„è¨­å®š / Places & Settings": [
    "hospital","toilet","pool",
    "school","city",
  ],
  "æ„Ÿæƒ… / Feelings": [
    "I am mad.","I am surprised.","I am worried.","I am afraid.",
    "I am happy.","I am sad.","I am tired.","I am hungry.","I am angry."
  ],
  "å¤©æ°— / Weather": [
    "sunny","raining","rainy","hot","cold","snowing","snowy","cloudy","windy"
  ],
  "å‹•ä½œ / Actions": [
    "I touch a flower.","I raise my hand.","I drive a car.","I knock on a door.", "I catch a ball.","I drop a box.",
    "I kick a ball.","I play games.","I pull a rope.","wiping","I put on a cap.","I am swimming.",
    "cupping hands","saying something","I speak English.","I listen to music.","I order french fries.","I eat a hamburger.","I write a letter.",
    "I am walking.","I am riding a bicycle.","I sit on an elephant.","I am standing.","I am about to sit on a chair.","They dressed up.",
    "I read a book.","I am laughing.","I wash my face.","working hard","I cut paper.",
    "I throw a ball.","jumping over the moon","I carry a bag.","I climb a cliff.","I bite an apple.","breaking heart",
    "I sleep.","I run.","I drink juice.","I brush my teeth.","I eat sushi."
  ],
  "è‰² / Colors": [
    "red","blue","green","yellow","black","white","orange","purple","brown"
  ],
  "æ•° / Numbers": [
    "one","two","three","four","five","six","seven","eight","nine",
    "ten","eleven","twelve"
  ]
};

/* â”€â”€ 2. å˜èªâ€•çµµæ–‡å­—å¯¾å¿œè¡¨ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const emoji = {
  "baby":"ğŸ‘¶ğŸ»","friend":"ğŸ§","boy":"ğŸ‘¦ğŸ»","classmates":"ğŸ‘©â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦","bride":"ğŸ‘°ğŸ»â€â™€ï¸",
  "mother":"ğŸ‘©","father":"ğŸ‘¨","sister":"ğŸ‘§","brother":"ğŸ‘¦","grandpa":"ğŸ‘´",
  "helmet":"ğŸª–","boots":"ğŸ‘¢ğŸ‘¢","hat":"ğŸ‘’","hats":"ğŸ‘’ğŸ‘’ğŸ©",
  "slippers":"ğŸ©´ğŸ©´","uniform":"ğŸ½","coat":"ğŸ§¥","coats":"ğŸ§¥ğŸ§¥",
  "cap":"ğŸ§¢","shirt":"ğŸ‘•","shirts":"ğŸ‘•ğŸ‘•","swimming trunks":"ğŸ©³",
  "tie":"ğŸ‘”","pants/jeans":"ğŸ‘–","bag":"ğŸ‘œ","bags":"ğŸ‘œğŸ’¼ğŸ‘œ","shoes":"ğŸ‘ŸğŸ‘Ÿ",
  "hand":"ğŸ¤š","hands":"ğŸ‘",
  "food":"ğŸ™ğŸ²ğŸ–ğŸ¥—","milk":"ğŸ¥›","bread":"ğŸ","rice":"ğŸš","egg":"ğŸ¥š","eggs":"ğŸ¥šğŸ¥š",
  "apple":"ğŸ","apples":"ğŸğŸğŸ","cola":"ğŸ¥¤","French fries":"ğŸŸ","hamburger":"ğŸ”",
  "vegetables":"ğŸ¥¬ğŸ¥•ğŸ¥¦","tomato":"ğŸ…",
  "glass":"ğŸ¥ƒ","soccer ball":"âš½","roller coaster":"ğŸ¢","car":"ğŸš—","flowers":"ğŸŒ¸ğŸŒ¸",

  "can":"ğŸ¥«","fan":"ğŸª­","rope":"ğŸª¢","box":"ğŸ“¦","stick":"ğŸ¦¯",
  "snowman":"â›„","umbrella":"â˜‚ï¸","pen":"ğŸ–Šï¸","pens":"ğŸ–Šï¸ğŸ–Šï¸","pencil":"âœï¸",
  "pencils":"âœï¸âœï¸","book":"ğŸ“•","books":"ğŸ“•ğŸ“•","letter":"âœ‰ï¸","bicycle":"ğŸš²",
  "door":"ğŸšª","3 textbooks":"ğŸ“š","chair":"ğŸª‘","chairs":"ğŸª‘ğŸª‘",
  "cup":"ğŸµ","knife":"ğŸ”ª","mirror":"ğŸª","basket ball":"ğŸ€",
  "chocolate bar":"ğŸ«","ladder":"ğŸªœ",
  "frog":"ğŸ¸","dog":"ğŸ¶","dogs":"ğŸ¶ğŸ¶","cat":"ğŸ±","cats":"ğŸ±ğŸ±","bird":"ğŸ¦",
  "birds":"ğŸ¦ğŸ¦ğŸ¦","elephant":"ğŸ˜","elephants":"ğŸ˜ğŸ˜",
  "moon":"ğŸŒ™","snow":"â„ï¸","sun":"â˜€ï¸","mountains":"ğŸ”ï¸","tree":"ğŸŒ³",
  "fun":"ğŸ‰","trouble":"âš ï¸","hurry":"â°","sport":"ğŸ…","day":"ğŸ“…","soccer":"âš½",
  "baseball":"âš¾",
  "hospital":"ğŸ¥",
  "toilet":"ğŸš½","pool":"ğŸŠâ€â™‚ï¸",
  "school":"ğŸ«","city":"ğŸ™ï¸",
  "I am mad.":"ğŸ˜¡","I am surprised.":"ğŸ˜²","I am worried.":"ğŸ˜Ÿ","I am afraid.":"ğŸ˜±",
  "I am happy.":"ğŸ˜Š","I am sad.":"ğŸ˜¢","I am tired.":"ğŸ¥±","I am hungry.":"ğŸ¤¤",
  "I am angry.":"ğŸ˜ ",
  "sunny":"â˜€ï¸","raining":"ğŸŒ§ï¸","rainy":"ğŸŒ§ï¸","hot":"ğŸ¥µ","cold":"ğŸ¥¶",
  "snowing":"ğŸŒ¨ï¸","snowy":"â„ï¸","cloudy":"â˜ï¸","windy":"ğŸŒ¬ï¸",
  "I touch a flower.":"ğŸ¤ğŸŒ¸",
  "I raise my hand.":"ğŸ™‹â€â™‚ï¸",
  "I drive a car.":"ğŸš—","I knock on a door.":"ğŸ¤ŒğŸ½ğŸšª",
  "I am standing.":"ğŸ§","I catch a ball.":"ğŸ€ğŸ¤²","I drop a box.":"ğŸ«±ğŸ¼ğŸ“¦","I kick a ball.":"ğŸ¦µğŸˆ","I play games.":"ğŸ®",
  "I pull a rope.":"ğŸ«´ğŸ¼ğŸª¢","wiping":"ğŸ§»","I put on a cap.":"ğŸ§¢","I am swimming.":"ğŸŠâ€â™‚ï¸",
  "cupping hands":"ğŸ¤²","saying something":"ğŸ’¬","I speak English.":"ğŸ—£ï¸ğŸ†’","I listen to music.":"ğŸ‘‚ğŸ¼","I order french fries.":"ğŸ‘†ğŸ¼ğŸŸ",
  "I eat a hamburger.":"ğŸ½ï¸ğŸ”","I write a letter.":"âœ‰ï¸âœï¸","I am walking.":"ğŸš¶â€â™‚ï¸","I am riding a bicycle.":"ğŸš´â€â™‚ï¸",
  "I sit on an elephant.":"ğŸª‘ğŸ˜","I am about to sit on a chair.":"ğŸª‘","They dressed up.":"ğŸ©ğŸ‘—",
  "I read a book.":"ğŸ“–","I am laughing.":"ğŸ˜‚","I wash my face.":"ğŸ§¼ğŸ˜Š","working hard":"ğŸ’ª",
  "I cut paper.":"âœ‚ï¸ğŸ§»","I throw a ball.":"ğŸ¤½â€â™‚ï¸","jumping over the moon":"ğŸŒ™ğŸ¤¾â€â™‚ï¸",
  "I carry a bag.":"ğŸ§º","I climb a cliff.":"ğŸ§—â€â™‚ï¸","I bite an apple.":"ğŸ¦·ğŸ","breaking heart":"ğŸ’”",
  "I sleep.":"ğŸ˜´","I run.":"ğŸƒ","I drink juice.":"ğŸ§ƒ",
  "I brush my teeth.":"ğŸª¥ğŸ¦·ğŸ¦·","I eat sushi.":"ğŸ£ğŸ¥¢",
  "red":"ğŸŸ¥","blue":"ğŸŸ¦","green":"ğŸŸ©","yellow":"ğŸŸ¨","black":"â¬›","white":"â¬œ",
  "orange":"ğŸŸ§","purple":"ğŸŸª","brown":"ğŸŸ«",
  "one":"1ï¸âƒ£","two":"2ï¸âƒ£","three":"3ï¸âƒ£","four":"4ï¸âƒ£","five":"5ï¸âƒ£","six":"6ï¸âƒ£",
  "seven":"7ï¸âƒ£","eight":"8ï¸âƒ£","nine":"9ï¸âƒ£","ten":"ğŸ”Ÿ","eleven":"1ï¸âƒ£1ï¸âƒ£",
  "twelve":"1ï¸âƒ£2ï¸âƒ£"
};

function renderEmoji(word) {
  const item = emoji[word];
  if (!item) return "";               // ç™»éŒ²ãŒãªã‘ã‚Œã°ç©ºæ–‡å­—
  if (item.startsWith("match/")) {      // ç”»åƒãªã‚‰ <match>
    return `<img src="${item}" alt="${word}" class="emoji">`;
  }
  return item;                        // æ–‡å­—çµµæ–‡å­—ãªã‚‰ãã®ã¾ã¾
}

/* ---------- çŠ¶æ…‹ --------- */
let draggedWord=null,touchClone=null,timerInt=null;

/* ---------- ãƒœãƒ¼ãƒ‰ç”Ÿæˆ ---------- */
function buildBoard(mode){
  const imgArea=document.getElementById('imageArea');
  const wordArea=document.getElementById('wordArea');
  imgArea.innerHTML='';wordArea.innerHTML='';

  const all=Object.values(wordsByCat).flat();
  const pick=mode==='trial'?all.sort(()=>.5-Math.random()).slice(0,30)
                           :wordsByCat[document.getElementById('categorySelect').value];

  pick.sort(()=>.5-Math.random()).forEach(w=>{
    const d=document.createElement('div');d.className='img-card';
    d.textContent=emoji[w]||w;d.dataset.word=w;
    d.addEventListener('dragover',e=>e.preventDefault());
    d.addEventListener('drop',handleDrop);imgArea.appendChild(d);
  });

  pick.sort(()=>.5-Math.random()).forEach(w=>{
    const d=document.createElement('div');d.className='word-card';
    d.textContent=addArticle(w);d.dataset.word=w;d.draggable=true;
    d.addEventListener('dragstart',()=>{draggedWord=w;speak(addArticle(w));});
    d.addEventListener('click',()=>speak(addArticle(w)));wordArea.appendChild(d);
  });
}

/* ---------- ãƒ‰ãƒ­ãƒƒãƒ—åˆ¤å®š & ã‚¯ãƒªã‚¢æ¼”å‡º ---------- */
function handleDrop(e){
  const img=e.currentTarget;
  if(img.dataset.word!==draggedWord){
    img.classList.add('wrong-anim');setTimeout(()=>img.classList.remove('wrong-anim'),350);
    return;
  }
  img.classList.add('matched','correct-anim');
  const pair=document.querySelector(`.word-card[data-word="${draggedWord}"]`);
  pair?.classList.add('matched','correct-anim');

  setTimeout(()=>{
    img.style.display='none';pair&&(pair.style.display='none');

    const remain=document.querySelectorAll('.img-card:not([style*="display: none"])').length;
    if(remain===0){           /* ã™ã¹ã¦æƒã£ãŸï¼ */
      /* Trial ãƒ¢ãƒ¼ãƒ‰ã®ã¨ãã¯ã‚¿ã‚¤ãƒãƒ¼åœæ­¢ */
      const timerEl=document.getElementById('timer');
      const isTrial=timerEl.style.display==='inline';
      let sec='';
      if(isTrial){
        clearInterval(timerInt);
        sec=timerEl.textContent.replace('Time: ','').replace('s','');
        speak(`${sec} seconds! Congratulations!`);
      }else{
        speak('Well done! Congratulations!');
      }
      celebrate();            /* â˜… ã‚³ãƒ³ãƒ•ã‚§ãƒƒãƒ†ã‚£ */
      alert(isTrial?`Finished in ${sec} seconds! ğŸ‰`:'Great job! ğŸ‰');
    }
  },200);
}

/* ---------- ã‚¿ãƒƒãƒãƒ‰ãƒ©ãƒƒã‚° ---------- */
document.addEventListener('touchstart',e=>{
  const base=e.target.closest('.word-card');
  if(!base||base.classList.contains('matched'))return;
  draggedWord=base.dataset.word;speak(addArticle(draggedWord));
  touchClone=base.cloneNode(true);
  Object.assign(touchClone.style,{position:'absolute',pointerEvents:'none',zIndex:1000,opacity:.7,
    width:base.offsetWidth+'px',height:base.offsetHeight+'px',
    lineHeight:getComputedStyle(base).lineHeight,fontSize:getComputedStyle(base).fontSize,
    padding:getComputedStyle(base).padding});document.body.appendChild(touchClone);
});
document.addEventListener('touchmove',e=>{
  if(!touchClone||!e.touches.length)return;
  const t=e.touches[0];
  touchClone.style.left=(t.pageX-touchClone.offsetWidth/2)+'px';
  touchClone.style.top =(t.pageY-touchClone.offsetHeight/2)+'px';
});
document.addEventListener('touchend',e=>{
  if(!touchClone)return;
  const el=document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY);
  const img=el?.closest('.img-card');if(img)handleDrop({currentTarget:img});
  touchClone.remove();touchClone=null;
});

/* ---------- ã‚¿ã‚¤ãƒãƒ¼ ---------- */
function startTimer(){
  const tm=document.getElementById('timer');const st=Date.now();
  clearInterval(timerInt);
  timerInt=setInterval(()=>tm.textContent='Time: '+Math.floor((Date.now()-st)/1000)+'s',500);
}

/* ---------- æ¸¸æˆé–‹å§‹ ---------- */
function startGame(mode){
  document.getElementById('startScreen').style.display='none';
  const gs=document.getElementById('gameScreen');gs.style.display='flex';
  const sel=document.getElementById('categorySelect');
  const st=document.getElementById('startCategoryBtn');
  const tm=document.getElementById('timer');
  if(mode==='trial'){
    sel.style.display='none';st.style.display='none';tm.style.display='inline';
    startTimer();buildBoard('trial');
  }else{
    sel.style.display='inline';st.style.display='inline';tm.style.display='none';
  }
}

/* ---------- åˆæœŸåŒ– ---------- */
document.addEventListener('DOMContentLoaded',()=>{
  document.getElementById('practiceBtn').addEventListener('click',()=>startGame('practice'));
  document.getElementById('trialBtn').addEventListener('click',   ()=>startGame('trial'));
  document.getElementById('backBtn').addEventListener('click',()=>{
    document.getElementById('gameScreen').style.display='none';
    document.getElementById('startScreen').style.display='block';
  });
  document.getElementById('startCategoryBtn').addEventListener('click',()=>buildBoard('practice'));
  const sel=document.getElementById('categorySelect');
  Object.keys(wordsByCat).forEach(c=>{
    const o=document.createElement('option');o.value=o.textContent=c;sel.appendChild(o);
  });
  speechSynthesis.getVoices(); // preload
});
</script>
</body>
</html>

